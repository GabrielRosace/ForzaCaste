{"ast":null,"code":"import * as i0 from \"@angular/core\";\nimport * as i1 from \"../socketio.service\";\nimport * as i2 from \"../user-http.service\";\nimport * as i3 from \"@angular/router\";\nimport * as i4 from \"@angular/common\";\n\nfunction CpuComponent_div_3_Template(rf, ctx) {\n  if (rf & 1) {\n    const _r4 = i0.ɵɵgetCurrentView();\n\n    i0.ɵɵelementStart(0, \"div\", 25);\n    i0.ɵɵtext(1);\n    i0.ɵɵelementStart(2, \"button\", 26);\n    i0.ɵɵlistener(\"click\", function CpuComponent_div_3_Template_button_click_2_listener() {\n      const restoredCtx = i0.ɵɵrestoreView(_r4);\n      const alert_r2 = restoredCtx.$implicit;\n      const ctx_r3 = i0.ɵɵnextContext();\n      return ctx_r3.close(alert_r2);\n    });\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementEnd();\n  }\n\n  if (rf & 2) {\n    const alert_r2 = ctx.$implicit;\n    i0.ɵɵadvance(1);\n    i0.ɵɵtextInterpolate1(\" \", alert_r2.message, \" \");\n  }\n}\n\nfunction CpuComponent_tr_13_td_1_span_2_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelement(0, \"span\", 31);\n  }\n}\n\nfunction CpuComponent_tr_13_td_1_span_3_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelement(0, \"span\", 32);\n  }\n}\n\nfunction CpuComponent_tr_13_td_1_span_4_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelement(0, \"span\", 33);\n  }\n}\n\nfunction CpuComponent_tr_13_td_1_Template(rf, ctx) {\n  if (rf & 1) {\n    const _r13 = i0.ɵɵgetCurrentView();\n\n    i0.ɵɵelementStart(0, \"td\");\n    i0.ɵɵelementStart(1, \"div\", 27);\n    i0.ɵɵlistener(\"click\", function CpuComponent_tr_13_td_1_Template_div_click_1_listener() {\n      const restoredCtx = i0.ɵɵrestoreView(_r13);\n      const i_r8 = restoredCtx.index;\n      const ctx_r12 = i0.ɵɵnextContext(2);\n      return ctx_r12.add(i_r8);\n    });\n    i0.ɵɵtemplate(2, CpuComponent_tr_13_td_1_span_2_Template, 1, 0, \"span\", 28);\n    i0.ɵɵtemplate(3, CpuComponent_tr_13_td_1_span_3_Template, 1, 0, \"span\", 29);\n    i0.ɵɵtemplate(4, CpuComponent_tr_13_td_1_span_4_Template, 1, 0, \"span\", 30);\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementEnd();\n  }\n\n  if (rf & 2) {\n    const column_r7 = ctx.$implicit;\n    const i_r8 = ctx.index;\n    const ctx_r6 = i0.ɵɵnextContext(2);\n    i0.ɵɵadvance(1);\n    i0.ɵɵstyleProp(\"background-color\", ctx_r6.isTosuggest(i_r8));\n    i0.ɵɵadvance(1);\n    i0.ɵɵproperty(\"ngIf\", ctx_r6.isred(column_r7));\n    i0.ɵɵadvance(1);\n    i0.ɵɵproperty(\"ngIf\", ctx_r6.isyellow(column_r7));\n    i0.ɵɵadvance(1);\n    i0.ɵɵproperty(\"ngIf\", ctx_r6.isempty(column_r7));\n  }\n}\n\nfunction CpuComponent_tr_13_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementStart(0, \"tr\");\n    i0.ɵɵtemplate(1, CpuComponent_tr_13_td_1_Template, 5, 5, \"td\", 10);\n    i0.ɵɵelementEnd();\n  }\n\n  if (rf & 2) {\n    const row_r5 = ctx.$implicit;\n    i0.ɵɵadvance(1);\n    i0.ɵɵproperty(\"ngForOf\", row_r5);\n  }\n}\n\nexport let CpuComponent = /*#__PURE__*/(() => {\n  class CpuComponent {\n    constructor(sio, us, router) {\n      this.sio = sio;\n      this.us = us;\n      this.router = router;\n      this.game = [];\n      this.visibility = \"none\"; //default=\"none\"\n\n      this.opacity = 0.5; //default=0.5\n\n      this.alerts = [];\n      this.lv = \"\";\n      this.title = \"\";\n      this.content = \"\";\n      this.suggestion = \"Ask for some suggestion\";\n      this.win = false;\n      this.suggestedcollum = -1;\n      this.us.friendGame = false;\n\n      if (this.us.lv != undefined) {\n        if (this.us.lv == 2) {\n          this.lv = \"Easy\";\n        }\n\n        if (this.us.lv == 5) {\n          this.lv = \"Medium\";\n        }\n\n        if (this.us.lv == 7) {\n          this.lv = \"Hard\";\n        }\n\n        this.visibility = \"\";\n        this.opacity = 1;\n      }\n    }\n    /* When component is destroyed it will unsubscribe from the sockets */\n\n\n    ngOnDestroy() {\n      this.deleteMatch();\n    }\n    /* Create random number - USELESS */\n\n\n    randomNumber(min, max) {\n      return Math.floor(Math.random() * (max - min) + min);\n    }\n    /* When components load, it will load the gameboard */\n\n\n    ngOnInit() {\n      if (!this.us.get_token()) {\n        this.router.navigate(['/']);\n      } else if (this.us.has_nonregmod_role()) {\n        this.router.navigate(['/profile']);\n      } else {\n        for (var i = 0; i < 6; i++) {\n          this.game[i] = [];\n\n          for (var j = 0; j < 7; j++) {\n            this.game[i][j] = 0;\n          }\n        }\n      }\n    }\n    /* remove alert from the alters list, then from the view */\n\n\n    close(alert) {\n      this.alerts.splice(this.alerts.indexOf(alert), 1);\n    }\n\n    deleteMatch() {\n      this.us.delete_match().subscribe(data => {});\n    }\n\n    closeMatch() {\n      if (this.us.friendGame) {\n        if (this.win) {\n          this.us.lv = undefined;\n        } else {\n          this.us.delete_match().subscribe(data => {\n            console.log(data);\n            this.us.lv = undefined;\n          });\n        }\n      } else {\n        if (this.win) {\n          this.us.lv = undefined;\n          this.router.navigate(['/home']);\n        } else {\n          this.us.delete_match().subscribe(data => {\n            console.log(data);\n            this.us.lv = undefined;\n            this.router.navigate(['/home']);\n          });\n        }\n      }\n    }\n\n    isTosuggest(collumn) {\n      if (collumn == this.suggestedcollum) {\n        console.log(collumn);\n        return \"#F56476\";\n      } else {\n        return \"transparent\";\n      }\n    }\n\n    askSuggestion() {\n      if (this.win) {\n        this.title = \"Error suggestion\";\n        this.content = \"Someone have already win\";\n        document.getElementById(\"openstats\").click();\n      }\n\n      this.us.askSuggestion().subscribe(msg => {\n        console.log(JSON.stringify(msg));\n\n        if (msg.error) {\n          this.title = \"Error suggestion\";\n          this.content = msg.errormessage;\n        } else {\n          this.suggestion = \"AI suggest to add to collumn: \" + (msg.move[\"0\"] + 1);\n          this.suggestedcollum = msg.move[\"0\"];\n        }\n      }, err => {\n        console.log(err);\n        this.title = \"Error suggestion\";\n        this.content = err.error.errormessage;\n        document.getElementById(\"openstats\").click();\n      });\n    }\n    /* make a turn, when is over, switch the player turn */\n\n\n    add(c) {\n      this.suggestedcollum = -1;\n      this.us.moveCPUgame(c).subscribe(msg => {\n        let stopme = false;\n        let stopcpu = false;\n        console.log(JSON.stringify(msg));\n\n        if (msg.error != undefined) {\n          if (msg.error) {\n            this.alerts.push({\n              message: msg.errormessage\n            });\n          } else {}\n        }\n\n        for (var i = 5; i >= 0; i--) {\n          if (!stopme) {\n            if (this.game[i][c] == 0) {\n              this.game[i][c] = 1;\n              console.log(\"valore: \", this.game[i][c]);\n              this.visibility = \"none\";\n              this.opacity = 0.5;\n              stopme = true;\n            }\n          }\n        }\n\n        const colonna = msg.cpu;\n\n        for (var i = 5; i >= 0; i--) {\n          if (!stopcpu) {\n            if (this.game[i][colonna] == 0) {\n              this.game[i][colonna] = 2;\n              console.log(\"valore: \", this.game[i][colonna]);\n              this.visibility = \"\";\n              this.opacity = 1;\n              stopcpu = true;\n            }\n          }\n        }\n\n        if (msg.winner != undefined) {\n          this.win = true;\n          this.visibility = \"none\";\n          this.opacity = 0.5;\n          let username = this.us.get_username();\n          let p2 = \"CPU\";\n\n          if (msg.winner == username) {\n            this.title = username.toUpperCase() + \" WIN!!!\";\n            this.content = username + \" win this game against \" + p2;\n          } else {\n            this.title = p2 + \" WIN!!!\";\n            this.content = p2 + \" win this game against \" + username;\n          }\n\n          document.getElementById(\"openstats\").click();\n        }\n      });\n    }\n    /* Check if there is some players's move */\n\n\n    isempty(i) {\n      if (i == 0) {\n        return true;\n      } else {\n        return false;\n      }\n    }\n    /* Check if there is some players's move */\n\n\n    isyellow(i) {\n      if (i == 1) {\n        return true;\n      } else {\n        return false;\n      }\n    }\n    /* Check if there is some players's move */\n\n\n    isred(i) {\n      if (i == 2) {\n        return true;\n      } else {\n        return false;\n      }\n    }\n\n  }\n\n  CpuComponent.ɵfac = function CpuComponent_Factory(t) {\n    return new (t || CpuComponent)(i0.ɵɵdirectiveInject(i1.SocketioService), i0.ɵɵdirectiveInject(i2.UserHttpService), i0.ɵɵdirectiveInject(i3.Router));\n  };\n\n  CpuComponent.ɵcmp = /*@__PURE__*/i0.ɵɵdefineComponent({\n    type: CpuComponent,\n    selectors: [[\"app-cpu\"]],\n    decls: 39,\n    vars: 11,\n    consts: [[1, \"myContainer\"], [\"type\", \"button\", \"id\", \"openstats\", \"data-bs-toggle\", \"modal\", \"data-bs-target\", \"#w-stats\", 1, \"w-100\", \"btn\", \"btn-warning\", \"btn-lg\", \"mybtn\", 3, \"hidden\"], [1, \"d-flex\", \"flex-column\"], [\"class\", \"alert alert-warning alert-dismissible fade show\", \"role\", \"alert\", 4, \"ngFor\", \"ngForOf\"], [\"type\", \"button\", 1, \"btn\", \"btn-danger\", \"btn-sm\", \"exit\", 3, \"click\"], [1, \"list-group\", \"pt-2\", \"pb-2\"], [1, \"list-group-item\", \"d-flex\", \"justify-content-between\", \"align-items-center\"], [1, \"enable\"], [1, \"gameboard\"], [1, \"table\"], [4, \"ngFor\", \"ngForOf\"], [1, \"list-group\", 2, \"border\", \"none\", \"margin-bottom\", \"3vh !important\"], [1, \"list-group-item\", \"d-flex\", \"justify-content-between\", \"align-items-center\", 2, \"border\", \"none\"], [1, \"list-group-item\", \"d-flex\", \"align-items-center\", 2, \"border\", \"none\"], [1, \"gettone\", 2, \"background-color\", \"gold\", \"margin-left\", \"3px !important\"], [1, \"gettone\", 2, \"background-color\", \"red\", \"margin-left\", \"3px !important\"], [\"type\", \"button\", 1, \"btn\", \"btn-primary\", \"mybtn\", 3, \"click\"], [\"id\", \"w-stats\", \"tabindex\", \"-1\", \"data-backdrop\", \"false\", 1, \"modal\", \"fade\"], [1, \"modal-dialog\", \"modal-dialog-centered\"], [1, \"modal-content\"], [1, \"modal-header\"], [\"id\", \"editModalLabel1\", 1, \"modal-title\"], [1, \"text-center\", \"fs-2\"], [1, \"modal-footer\"], [\"type\", \"button\", \"data-bs-dismiss\", \"modal\", 1, \"btn\", \"btn-danger\", \"btn-sm\", \"mybtn\"], [\"role\", \"alert\", 1, \"alert\", \"alert-warning\", \"alert-dismissible\", \"fade\", \"show\"], [\"type\", \"button\", \"aria-label\", \"Close\", 1, \"btn-close\", \"btn-close-black\", 3, \"click\"], [1, \"griglia\", 3, \"click\"], [\"class\", \"gettone\", \"style\", \"background-color:red;\", 4, \"ngIf\"], [\"class\", \"gettone\", \"style\", \"background-color:gold;\", 4, \"ngIf\"], [\"class\", \"gettone\", \"style\", \"background-color:trasparent;\", 4, \"ngIf\"], [1, \"gettone\", 2, \"background-color\", \"red\"], [1, \"gettone\", 2, \"background-color\", \"gold\"], [1, \"gettone\", 2, \"background-color\", \"trasparent\"]],\n    template: function CpuComponent_Template(rf, ctx) {\n      if (rf & 1) {\n        i0.ɵɵelementStart(0, \"div\", 0);\n        i0.ɵɵelement(1, \"button\", 1);\n        i0.ɵɵelementStart(2, \"div\", 2);\n        i0.ɵɵtemplate(3, CpuComponent_div_3_Template, 3, 1, \"div\", 3);\n        i0.ɵɵelementStart(4, \"button\", 4);\n        i0.ɵɵlistener(\"click\", function CpuComponent_Template_button_click_4_listener() {\n          return ctx.closeMatch();\n        });\n        i0.ɵɵtext(5, \"EXIT\");\n        i0.ɵɵelementEnd();\n        i0.ɵɵelementStart(6, \"ul\", 5);\n        i0.ɵɵelementStart(7, \"li\", 6);\n        i0.ɵɵtext(8);\n        i0.ɵɵelementEnd();\n        i0.ɵɵelementEnd();\n        i0.ɵɵelementStart(9, \"div\", 7);\n        i0.ɵɵelementStart(10, \"div\", 8);\n        i0.ɵɵelementStart(11, \"table\", 9);\n        i0.ɵɵelementStart(12, \"tbody\");\n        i0.ɵɵtemplate(13, CpuComponent_tr_13_Template, 2, 1, \"tr\", 10);\n        i0.ɵɵelementEnd();\n        i0.ɵɵelementEnd();\n        i0.ɵɵelementEnd();\n        i0.ɵɵelementEnd();\n        i0.ɵɵelementStart(14, \"ul\", 11);\n        i0.ɵɵelementStart(15, \"li\", 12);\n        i0.ɵɵelementStart(16, \"div\", 13);\n        i0.ɵɵelementStart(17, \"div\");\n        i0.ɵɵtext(18, \" You are playing as: \");\n        i0.ɵɵelementEnd();\n        i0.ɵɵelement(19, \"span\", 14);\n        i0.ɵɵelementEnd();\n        i0.ɵɵelementStart(20, \"div\", 13);\n        i0.ɵɵelementStart(21, \"div\");\n        i0.ɵɵtext(22, \"CPU is playing as: \");\n        i0.ɵɵelementEnd();\n        i0.ɵɵelement(23, \"span\", 15);\n        i0.ɵɵelementEnd();\n        i0.ɵɵelementEnd();\n        i0.ɵɵelementEnd();\n        i0.ɵɵelementStart(24, \"div\");\n        i0.ɵɵtext(25);\n        i0.ɵɵelementStart(26, \"button\", 16);\n        i0.ɵɵlistener(\"click\", function CpuComponent_Template_button_click_26_listener() {\n          return ctx.askSuggestion();\n        });\n        i0.ɵɵtext(27, \"Ask suggestion\");\n        i0.ɵɵelementEnd();\n        i0.ɵɵelementEnd();\n        i0.ɵɵelementEnd();\n        i0.ɵɵelementEnd();\n        i0.ɵɵelementStart(28, \"div\", 17);\n        i0.ɵɵelementStart(29, \"div\", 18);\n        i0.ɵɵelementStart(30, \"div\", 19);\n        i0.ɵɵelementStart(31, \"div\", 20);\n        i0.ɵɵelementStart(32, \"h5\", 21);\n        i0.ɵɵtext(33);\n        i0.ɵɵelementEnd();\n        i0.ɵɵelementEnd();\n        i0.ɵɵelementStart(34, \"p\", 22);\n        i0.ɵɵtext(35);\n        i0.ɵɵelementEnd();\n        i0.ɵɵelementStart(36, \"div\", 23);\n        i0.ɵɵelementStart(37, \"button\", 24);\n        i0.ɵɵtext(38, \"Close\");\n        i0.ɵɵelementEnd();\n        i0.ɵɵelementEnd();\n        i0.ɵɵelementEnd();\n        i0.ɵɵelementEnd();\n        i0.ɵɵelementEnd();\n      }\n\n      if (rf & 2) {\n        i0.ɵɵadvance(1);\n        i0.ɵɵproperty(\"hidden\", true);\n        i0.ɵɵadvance(2);\n        i0.ɵɵproperty(\"ngForOf\", ctx.alerts);\n        i0.ɵɵadvance(5);\n        i0.ɵɵtextInterpolate1(\" You are playing VS CPU at difficulty: \", ctx.lv, \" \");\n        i0.ɵɵadvance(1);\n        i0.ɵɵstyleProp(\"pointer-events\", ctx.visibility)(\"opacity\", ctx.opacity);\n        i0.ɵɵadvance(4);\n        i0.ɵɵproperty(\"ngForOf\", ctx.game);\n        i0.ɵɵadvance(12);\n        i0.ɵɵtextInterpolate1(\" \", ctx.suggestion, \" \");\n        i0.ɵɵadvance(8);\n        i0.ɵɵtextInterpolate(ctx.title);\n        i0.ɵɵadvance(2);\n        i0.ɵɵtextInterpolate(ctx.content);\n      }\n    },\n    directives: [i4.NgForOf, i4.NgIf],\n    styles: [\".myContainer[_ngcontent-%COMP%]{display:flex;justify-content:center;padding:5vw 5vw 10vw;height:100vh;overflow-y:scroll;background-color:#f5f5f5}.exit[_ngcontent-%COMP%]{align-items:flex-end}.title[_ngcontent-%COMP%]{display:flex;justify-content:center;align-content:center;padding-top:2vw}.containerchat[_ngcontent-%COMP%]{border:.5px solid #dedede;background-color:#b8cfe6;border-radius:5px;padding:10px;margin:10px 0}.darker[_ngcontent-%COMP%]{border-color:#ccc;background-color:#acd8bc}.containerchat[_ngcontent-%COMP%]:after{content:\\\"\\\";clear:both;display:table}td[_ngcontent-%COMP%]:hover:after{content:\\\"\\\";position:absolute;background-color:#587b7f;left:0;top:-5000px;height:10000px;width:100%;z-index:-1}.gameboard[_ngcontent-%COMP%]{min-width:400px;min-height:343px}.gettone[_ngcontent-%COMP%]{min-width:23px;min-height:23px}.griglia[_ngcontent-%COMP%]{min-width:57px;min-height:57px}.table[_ngcontent-%COMP%]{max-width:70vw;min-width:399px}td[_ngcontent-%COMP%]:hover:after{min-width:57px}@media (orientation: landscape){.gameboard[_ngcontent-%COMP%]{width:71vh;display:flex;align-items:center;align-content:center}.chatcontainer[_ngcontent-%COMP%]{display:block;max-width:100%;width:100%;max-height:50vh;height:50vh;overflow-y:scroll;background-color:#f5f5f5;border-style:solid;border-radius:3%;border-width:1pt}.mychat[_ngcontent-%COMP%]{width:100%;max-width:100%;max-height:70vh}.gettone[_ngcontent-%COMP%]{height:4vh;width:4vh;border-radius:50%;display:inline-block}.griglia[_ngcontent-%COMP%]{display:flex;justify-content:center;align-items:center;height:10vh;background-image:url(/assets/img/rvuoto.png);background-size:cover}table[_ngcontent-%COMP%]{max-width:70vh;overflow:hidden;transform:rotate(0);border-collapse:collapse;border-radius:4%}td[_ngcontent-%COMP%], tr[_ngcontent-%COMP%]{padding:0;cursor:pointer;position:relative;border:none;height:10vh;width:10vh;max-width:10vh}.container[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]{float:left;max-width:7vh;max-height:7vh;width:7vh;height:7vh;background-size:contain;margin-right:20px;border-radius:50%}.container[_ngcontent-%COMP%]   img.right[_ngcontent-%COMP%]{float:right;margin-left:20px;margin-right:0}}@media (orientation: portrait){.gameboard[_ngcontent-%COMP%]{width:71vw;display:flex;align-items:center;align-content:center}.chatcontainer[_ngcontent-%COMP%]{max-width:100%;width:100%;max-height:50vw;height:50vw;overflow-y:scroll;background-color:#f5f5f5;border-style:solid;border-radius:3%;border-width:1pt}.mychat[_ngcontent-%COMP%]{width:100%;max-width:100%;max-height:70vw}.gettone[_ngcontent-%COMP%]{height:4vw;width:4vw;border-radius:50%;display:inline-block}.griglia[_ngcontent-%COMP%]{display:flex;justify-content:center;align-items:center;height:10vw;background-image:url(/assets/img/rvuoto.png);background-size:cover}table[_ngcontent-%COMP%]{max-width:70vw;overflow:hidden;transform:rotate(0);border-collapse:collapse;border-radius:4%}td[_ngcontent-%COMP%], tr[_ngcontent-%COMP%]{padding:0;cursor:pointer;position:relative;border:none;height:10vw;width:10vw;max-width:10vw}.container[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]{max-width:7vw;max-height:7vw;width:7vw;height:7vw;background-size:contain;margin-right:20px;border-radius:50%}.container[_ngcontent-%COMP%]   img.right[_ngcontent-%COMP%]{float:right;margin-left:20px;margin-right:0}}.time-right[_ngcontent-%COMP%]{float:right;color:#aaa}.time-left[_ngcontent-%COMP%]{float:left;color:#999}\"]\n  });\n  return CpuComponent;\n})();","map":null,"metadata":{},"sourceType":"module"}